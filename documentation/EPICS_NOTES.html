<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>NASA_ACQ_EPICS_NOTES</title>
  </head>
  <body>
    <h2>Introduction</h2>
    <p><span style="font-family: Times New Roman, Times, serif;">This
        support module uses a PSCDRV driver to communicate with NASA ACQ
        nodes and provides an example IOC, and some Engineering CSS
        screens.&nbsp; All the records mentioned in the following
        sections have names beginning with </span><span
        style="font-family: Times New Roman, Times, serif;"><span
          style="font-family: Times New Roman, Times, serif;">$(P)$(R)
          macros.&nbsp; Typically the P macro is set to 'NASA_ACQ:' and
          the R macro to the acquisition node number followed by a
          colon.<br>
        </span></span></p>
    <h2><span style="font-family: Times New Roman, Times, serif;">System
        Monitoring <br>
      </span></h2>
    <span style="font-family: Times New Roman, Times, serif;">Processing
      the sysmonTrig_ record causes the IOC to read back a set of system
      monitor values and push them into the records described in the
      following table.</span><br>
    <div style="margin-left: 80px;"><span style="font-family: Times New
        Roman, Times, serif;"><span style="font-family: Times New Roman,
          Times, serif;"> </span></span><br>
    </div>
    <div style="margin-left: 40px;"> </div>
    <table style="text-align: left; width: 80%; margin-left: 40px;"
      cellspacing="2" cellpadding="2" border="1">
      <tbody>
        <tr>
          <td style="text-align: center;"><span style="font-weight:
              bold;"><span style="font-family: Times New Roman, Times,
                serif;">Name</span></span><span style="font-family:
              Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-weight:
              bold;"><span style="font-family: Times New Roman, Times,
                serif;">Type</span></span><span style="font-family:
              Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="vertical-align: middle; text-align: center;"><span
              style="font-weight: bold;"><span style="font-family: Times
                New Roman, Times, serif;">Description</span></span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">FPGA:Temperature</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">FPGA internal temperature in
              degrees C.</span><span style="font-family: Times New
              Roman, Times, serif;"><br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">FPGA:VccINT</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">FPGA internal Vcc.<br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">FPGA:VccAUX</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">FPGA auxiliary Vcc.<br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">FPGA:VBRAM</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">FPGA block RAM Vcc.<br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">MARBLE:FMC1:P12I</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Current being drawn through
              Marble FMC 1 connector 12 volt supply.<br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">MARBLE:FMC1:P12V</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Voltage at Marble FMC 1
              connector 12 volt supply.</span><br>
            <span style="font-family: Times New Roman, Times, serif;"></span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">MARBLE:FMC2:P12I</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Current being drawn through
              Marble FMC 2 connector 12 volt supply.</span><br>
            <span style="font-family: Times New Roman, Times, serif;"></span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">MARBLE:FMC2:P12V</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Voltage at Marble FMC 2
              connector 12 volt supply.</span><br>
            <span style="font-family: Times New Roman, Times, serif;"></span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">MARBLE:P12I</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Current drawn from Marble 12V
              supply.<br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">MARBLE:P12V</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ai</span></td>
          <td style="vertical-align: top;"><span style="font-family:
              Times New Roman, Times, serif;">Marble 12V supply actual
              voltage.</span><br>
            <span style="font-family: Times New Roman, Times, serif;"></span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ACQ:status</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">longin</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="vertical-align: top;"><span style="font-family:
              Times New Roman, Times, serif;">Fast acquisition system
              status:<span style="text-decoration: underline;"><br>
              </span></span>
            <table style=" text-align: left; width: 90%;"
              cellspacing="2" cellpadding="2" border="1">
              <tbody>
                <tr>
                  <td style="text-align: center;"><span
                      style="font-weight: bold;"><span
                        style="font-family: Times New Roman, Times,
                        serif;">Bit</span></span><span
                      style="font-family: Times New Roman, Times,
                      serif;"><br>
                    </span></td>
                  <td style="vertical-align: middle; text-align:
                    center;"><span style="font-weight: bold;"><span
                        style="font-family: Times New Roman, Times,
                        serif;">Description</span></span><span
                      style="font-family: Times New Roman, Times,
                      serif;"><br>
                    </span></td>
                </tr>
                <tr>
                  <td style="text-align: center;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">0</span><span style="font-family: Times
                      New Roman, Times, serif;"><br>
                    </span></td>
                  <td style="text-align: left;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">Set when acquisition clock is unlocked
                      from timing pulse-per-second marker.<br>
                    </span></td>
                </tr>
                <tr>
                  <td style="text-align: center;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">14</span><span style="font-family: Times
                      New Roman, Times, serif;"><br>
                    </span></td>
                  <td style="text-align: left;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">Set when packet builder has overrun
                      network driver.</span><span style="font-family:
                      Times New Roman, Times, serif;"><br>
                    </span></td>
                </tr>
                <tr>
                  <td style="text-align: center;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">15</span><span style="font-family: Times
                      New Roman, Times, serif;"><br>
                    </span></td>
                  <td style="text-align: left;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">Set when ADC sampling has overrun packet
                      builder</span><span style="font-family: Times New
                      Roman, Times, serif;"><br>
                    </span></td>
                </tr>
                <tr>
                  <td style="text-align: center;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">30</span><span style="font-family: Times
                      New Roman, Times, serif;"><br>
                    </span></td>
                  <td style="text-align: left;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">Set when acquisition is active.<br>
                    </span></td>
                </tr>
                <tr>
                  <td style="text-align: center;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">31</span><span style="font-family: Times
                      New Roman, Times, serif;"><br>
                    </span></td>
                  <td style="text-align: left;"><span
                      style="font-family: Times New Roman, Times,
                      serif;">Set when acquisition is enabled.</span><br>
                    <span style="font-family: Times New Roman, Times,
                      serif;"></span></td>
                </tr>
              </tbody>
            </table>
            <span style="font-family: Times New Roman, Times, serif;"><span
                style="text-decoration: underline;"></span> </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ACQ:active</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">longin</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="vertical-align: middle; text-align: left;"><span
              style="font-family: Times New Roman, Times, serif;">Bitmap
              of active ADC channels.&nbsp; Least significant bit
              corresponds to ADC channel 0.</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ACQ:DCcoupled</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">longin</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Bitmap of channel
              coupling.&nbsp; A 1 in a given bit position indicates that
              the channel is DC-coupled&nbsp; A 0 indicates
              AC-coupling.&nbsp; Least significant bit corresponds to
              ADC channel 0.</span><span style="font-family: Times New
              Roman, Times, serif;"><br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ACQ:clkPLL</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">longin</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">indicatesSystem clock alignment
              status register.&nbsp; See Verilog code for details.<br>
            </span></td>
        </tr>
      </tbody>
    </table>
    <div style="margin-left: 40px;"> </div>
    <div style="margin-left: 80px;"> <span style="font-family: Times
        New Roman, Times, serif;"><span style="font-family: Times New
          Roman, Times, serif;"></span></span><span style="font-family:
        Times New Roman, Times, serif;"></span> </div>
    <div style="margin-left: 40px;"> </div>
    <h2><span style="font-family: Times New Roman, Times, serif;">Controls</span></h2>
    <div style="margin-left: 40px;"> </div>
    <table style="text-align: left; width: 80%; margin-left: 40px;"
      cellspacing="2" cellpadding="2" border="1">
      <tbody>
        <tr>
          <td style="text-align: center;"><span style="font-weight:
              bold;"><span style="font-family: Times New Roman, Times,
                serif;">Name</span></span><span style="font-family:
              Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-weight:
              bold;"><span style="font-family: Times New Roman, Times,
                serif;">Type</span></span><span style="font-family:
              Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="vertical-align: middle; text-align: center;"><span
              style="font-weight: bold;"><span style="font-family: Times
                New Roman, Times, serif;">Description</span></span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ACQ:enable</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">bo</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Enable/disable (1/0) data
              acquisition.</span><span style="font-family: Times New
              Roman, Times, serif;"><br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ACQ:rate</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">mbbo</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Set the sampling rate.&nbsp; The
              sampling rate is 250 kHz divided by the menu item RVAL.<br>
            </span></td>
        </tr>
        <tr>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">ACQ:coupling:<span
                style="font-style: italic;">nn</span></span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: center;"><span style="font-family:
              Times New Roman, Times, serif;">bo</span><span
              style="font-family: Times New Roman, Times, serif;"><br>
            </span></td>
          <td style="text-align: left;"><span style="font-family: Times
              New Roman, Times, serif;">Set the input coupling for
              channel <span style="font-style: italic;">nn</span> to DC
              or AC (1/0).<br>
            </span></td>
        </tr>
      </tbody>
    </table>
    <div style="margin-left: 40px;"> </div>
    <div style="margin-left: 80px;"> <span style="font-family: Times
        New Roman, Times, serif;"><span style="font-family: Times New
          Roman, Times, serif;"></span></span><span style="font-family:
        Times New Roman, Times, serif;"></span> </div>
    <div style="margin-left: 40px;"> </div>
    <h2 style="margin-left: 40px;"><span style="font-family: Times New
        Roman, Times, serif;"></span></h2>
    <div style="margin-left: 40px;">
    </div>
    <h2>FPGA Reboot<br>
    </h2>
    <p><span style="font-family: Times New Roman, Times, serif;">Writing
        1, then 100, then 10000 to the FPGA:reboot record will cause the
        FPGA to reboot.</span><span style="font-family: Times New Roman,
        Times, serif;"><span style="caret-color: rgb(0, 0, 0); color:
          rgb(0, 0, 0); font-size: medium; font-style: normal;
          font-variant-caps: normal; font-weight: 400; letter-spacing:
          normal; text-align: center; text-indent: 0px; text-transform:
          none; white-space: normal; word-spacing: 0px;
          -webkit-text-stroke-width: 0px; text-decoration: none;
          display: inline !important; float: none;">&nbsp; The
          requirement of three write operations with different values is
          to guard against accidental reboots.<br>
        </span></span></p>
    <h2><span style="font-family: Times New Roman, Times, serif;">Inte</span><span
        style="font-family: Times New Roman, Times, serif;">rnal Records</span></h2>
    <p><span style="font-family: Times New Roman, Times, serif;">Records
        with names ending in an underscore are intended for internal use
        by the IOC and should not be written by any other clients.</span><br>
    </p>
  </body>
</html>
